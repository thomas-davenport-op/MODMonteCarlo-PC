# based on example from Herwig++ 2.4.2 distribution:
#   share/Herwig++/TVT.in

# Run options:
cd /Herwig/Generators
set LHCGenerator:NumberOfEvents 100000
set LHCGenerator:RandomNumberGenerator:Seed 175
set LHCGenerator:DebugLevel 0
set LHCGenerator:PrintEvent 1
set LHCGenerator:MaxErrors 100000

# redirect all log output to stdout
set LHCGenerator:UseStdout true

# do output to a HepMC file
cd /Herwig/Generators
insert LHCGenerator:AnalysisHandlers 0 /Herwig/Analysis/HepMCFile
set /Herwig/Analysis/HepMCFile:PrintEvent 1000000
set /Herwig/Analysis/HepMCFile:Format GenEvent
set /Herwig/Analysis/HepMCFile:Filename /tmp/agentWorkDir/8751d6fb-541c-4d86-8346-0aa76c0d5c77/tmp/tmp.fNaAF11283/generator.hepmc
# set /Herwig/Analysis/HepMCFile:Units GeV_mm


# Beam parameters:
set LHCGenerator:EventHandler:LuminosityFunction:Energy 200
set LHCGenerator:EventHandler:BeamA /Herwig/Particles/p+
set LHCGenerator:EventHandler:BeamB /Herwig/Particles/p+
set LHCGenerator:MaxErrors -1


# Process setup
# QCD 2-2 scattering:
cd /Herwig/MatrixElements
insert SimpleQCD:MatrixElements[0] MEQCD2to2


# Set cuts
# Use this for hard leading-jets in a certain pT window
set /Herwig/Cuts/JetKtCut:MinKT 4*GeV        # minimum jet pT
set /Herwig/Cuts/JetKtCut:MaxKT 200*GeV        # maximum jet pT

# Use this for hard leading-jets in a certain mHat window
set /Herwig/Cuts/QCDCuts:MHatMin 0*GeV        # minimum jet mHat
set /Herwig/Cuts/QCDCuts:MHatMax 200*GeV        # maximum jet mHat


# Make particles with c*tau > 10 mm stable:
set /Herwig/Decays/DecayHandler:MaxLifeTime 10*mm
set /Herwig/Decays/DecayHandler:LifeTimeOption Average


# tune 'LHC-UE-EE-4' parameters: -------------------
#%tuneFile%
# LHC-UE-EE-4 underlying-event tune (MRST LO** PDF set)
# Source: Herwig++ SVN (http://herwig.hepforge.org/trac/export/7360/trunk/src/LHC-UE-EE-4.in)
# More info: Herwig++ wiki (http://herwig.hepforge.org/trac/wiki/MB_UE_tunes)

# Running of alpha_s
cd /Herwig
create Herwig::O2AlphaS O2AlphaS
set Model:QCD/RunningAlphaS O2AlphaS

# MPI energy extrapolation settings
set /Herwig/UnderlyingEvent/MPIHandler:EnergyExtrapolation Power
set /Herwig/UnderlyingEvent/MPIHandler:ReferenceScale 7000.*GeV
set /Herwig/UnderlyingEvent/MPIHandler:Power 0.21
set /Herwig/UnderlyingEvent/MPIHandler:pTmin0 3.11*GeV

# Energy-independent MPI parameters
# Colour reconnection settings
set /Herwig/Hadronization/ColourReconnector:ColourReconnection Yes
set /Herwig/Hadronization/ColourReconnector:ReconnectionProbability 0.54 
# Colour Disrupt settings
set /Herwig/Partons/RemnantDecayer:colourDisrupt 0.80
# inverse hadron radius
set /Herwig/UnderlyingEvent/MPIHandler:InvRadius 1.11
# MPI model settings
set /Herwig/UnderlyingEvent/MPIHandler:softInt Yes
set /Herwig/UnderlyingEvent/MPIHandler:twoComp Yes
set /Herwig/UnderlyingEvent/MPIHandler:DLmode 2
# ---------------------------------------------

set /Herwig/UnderlyingEvent/MPIHandler:IdenticalToUE -1

# Run generator
cd /Herwig/Generators
run TVT LHCGenerator
